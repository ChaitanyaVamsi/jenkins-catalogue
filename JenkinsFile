pipeline{

  // agent any
  agent{
    node{
      label 'master'
    }
  }

  environment{
    COURSE = "Jenkins"
    PROJECT = "roboshop"
    COMPONENT = "catalogue"
  }

  options{
    timeout(time:10, unit: 'MINUTES')
    disableConcurrentBuilds()
  }

  stages{
    // need a plugin for this - Pipeline Utility Steps
    stage ('Display Version'){
        steps{
          script{
            def packageJSON = readJSON file: 'package.json'
            appVersion= packageJSON.version
            echo "app version: ${appVersion}"
          }
        }
    }

    stage('install dependencies'){
      steps{
        script{
          npm install
        }
      }
    }


  }
}